<html>
<head>
    <title>عرض الطباعة</title>
    <link rel="SHORTCUT ICON" href="87px.png"/> 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">


	   <!-- Normalize or reset CSS with your favorite library -->
  <link rel="stylesheet" href="normalize.min.css">

  <!-- Load paper.css for happy printing -->
  <link rel="stylesheet" href="paper.css">
  <link rel="stylesheet" href="bookcss/archive_print.css">

	<script src="jquery.js"></script>
    <script src="autocolumn.min.js"></script>
	
	
	
<!-- Set page size here: A5, A4 or A3 -->
<!-- Set also "landscape" if you need -->
<style>@page { size: A4 }</style>
	
<style type="text/css">



</style>


	 
	 
	 
</head>
<body class="A4">
<div id="theDiv">الرجاء الانتظار يتم توليد صفحات عرض الطباعة
</div> 
<div id="page_template">  
	<div class='header'>This is a header<hr></div>  
	<div class='content'></div>  
	<div class='footer'><hr><span>Page: </span>This is the footer.</div>  
</div> 
<div id="newsletterContent" style = "display:none;">

</div>
</body>

<script>

//var jsdom = require("G:/softwares/tools/nw.012/nwjs-v0.12.3-win-ia32/dont_move_delete_this_folder/www/jsdom/lib/jsdom.js");

			var content_height = 1000;	// the height of the content, discluding the header/footer
			var page = 1;				// the beginning page number to show in the footer
			function buildNewsletter(){
				if($('#newsletterContent').contents().length > 0){
					// when we need to add a new page, use a jq object for a template
					// or use a long HTML string, whatever your preference
					$page = $("#page_template").clone().addClass("sheet padding-10mm").css("display", "block");
					
					// fun stuff, like adding page numbers to the footer
					//$page.find(".footer span").append(page);
					$("body").append($page);
					page++;
					
					// here is the columnizer magic
					$('#newsletterContent').columnize({
						columns: 1,
						target: ".sheet:last .content",
						overflow: {
							height: content_height,
							id: "#newsletterContent",
							doneFunc: function(){								
								buildNewsletter();
							}
						}
						
						
					});
				}
}



 $(document).ready(function () {
            // retrieving our data and converting it back into an array
var retrievedData = localStorage.getItem("quentinTarantino");
var movies2 = JSON.parse(retrievedData);
$("#newsletterContent").html(movies2[0]);
$('.posttext > div,.posttext > span ,font').css("line-height",movies2[1]);
$("#newsletterContent").css('font-size',movies2[2]);
$('*').css("font-family",movies2[3]); 

  
setTimeout(
        function(){

  	
	 // $('.posttext > div,.posttext > span ,font').css("line-height",movies2[1]);
	  //$('.posttext').css('font-size',movies2[2]);
	 
 
	 // buildNewsletter();
	  
	   
	   
	   
	  $("#newsletterContent").show();
	  $("#theDiv").hide();

		   
        },
        (1000)
        );
		
		
	


});




var eventMethod = window.addEventListener ? "addEventListener" : "attachEvent";
var eventer = window[eventMethod];
var messageEvent = eventMethod == "attachEvent" ? "onmessage" : "message";
eventer(messageEvent,function(e) {
    var eventName = e.data[0];
    var data = e.data[1];
	var data2 = e.data[2];
	var data3 = e.data[3];
	var data4 = e.data[4];
	switch(eventName) {

	case 'send_con':
	
	window.opener.postMessage(["get_text"], '*');
	  /* alert(data);
	   try {
       $("#theDiv").hide();
	  // document.body.innerHTML  =data;
	   $("#newsletterContent").html(data);
	  $('.posttext > div,.posttext > span ,font').css("line-height",data2);
	  $('.posttext').css('font-size',data3);
	  $('#pagebody').css("font-family",data4);

}
catch(err) {
 alert();
}
	   
	   $("#newsletterContent").show();
	   
	  */
	 
	break;
	
	
	
	
}
},false);








if (typeof process !== "undefined" && typeof require !== "undefined") {
	
function selectText(containerid) {
    if (document.selection) { // IE
        var range = document.body.createTextRange();
        range.moveToElementText(document.getElementById(containerid));
        range.select();
    } else if (window.getSelection) {
        var range = document.createRange();
        range.selectNode(document.getElementById(containerid));
        window.getSelection().removeAllRanges();
        window.getSelection().addRange(range);
    }
}
	
	
	
                function copyToClipboard(text) {
                    var dummy = document.createElement("input");
                    document.body.appendChild(dummy);
                    dummy.setAttribute('value', text);
                    dummy.select();
                    document.execCommand("copy");
                    document.body.removeChild(dummy);
                }

                var el;

                function isEditable() {
                    el = document.activeElement; // focused element
                    if (el && ~['input', 'textarea'].indexOf(el.tagName.toLowerCase())) {
                        return !el.readOnly && !el.disabled;
                    }
                    el = getSelection()
                        .anchorNode; // selected node
                    if (!el) return undefined; // no selected node
                    el = el.parentNode; // selected element
                    return el.isContentEditable;
                }

                document.addEventListener("contextmenu", function (e) {
                   
                    
					//win.enterFullscreen();
					var gui = require('nw.gui');
					var menu = new gui.Menu();
                    e.preventDefault();
                    e.stopPropagation();

                    var showcntx = false;
                    var link = this.href;
 
						menu.append(new gui.MenuItem({
                                        label: 'طباعة'
                                        , click: function (e) {
                                           window.print();
											
                                        }
                                    }));
									
									
									
					 showcntx = true;
						
						
					



                    if (showcntx == true) {
						//consol
                        menu.popup(e.clientX, e.clientY);
                    }

                }, false);

}








</script>


</html>